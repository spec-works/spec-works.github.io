# SpecWorks Registry

This directory contains the static xRegistry catalog for the SpecWorks Factory.

## Access

**Registry Root**: https://spec-works.github.io/registry/

## Structure

```
registry/
├── index.json              # xRegistry root document
├── parts/
│   ├── index.json         # Parts collection
│   ├── vcard/
│   │   ├── index.json     # Part metadata
│   │   └── versions/
│   │       └── 1.0.0/
│   │           └── part.json  # Linkset (specs.json)
│   ├── jsondiff/
│   ├── icalendar/
│   ├── markmyword/
│   ├── ratelimiter/
│   └── linkset/
└── README.md              # This file
```

## xRegistry Specification

This registry follows the [xRegistry 0.5 specification](https://github.com/xregistry/spec).

## Registered Parts

| Part ID | Description | Specification |
|---------|-------------|---------------|
| [vcard](parts/vcard/) | Contact information (vCard Format) | RFC 6350 |
| [jsondiff](parts/jsondiff/) | JSON Patch operations | RFC 6902 |
| [icalendar](parts/icalendar/) | Calendar data (iCalendar) | RFC 5545 |
| [markmyword](parts/markmyword/) | Markdown ↔ Word conversion | CommonMark 0.31.2, ECMA-376 |
| [ratelimiter](parts/ratelimiter/) | HTTP rate limiting | IETF draft-ietf-httpapi-ratelimit-headers |
| [linkset](parts/linkset/) | Link set serialization | RFC 9264 |

## Usage

### Query the Registry

```bash
# Get registry root
curl https://spec-works.github.io/registry/

# List all parts
curl https://spec-works.github.io/registry/parts/

# Get specific part
curl https://spec-works.github.io/registry/parts/vcard/

# Get part linkset (specs.json)
curl https://spec-works.github.io/registry/parts/vcard/versions/1.0.0/part.json
```

### Discovery Pattern

The registry enables specification-centric discovery:

1. **Find by problem space**: "I need calendar parsing" → query for "icalendar"
2. **Get part metadata**: View available implementations (.NET, Python, Rust)
3. **Access linkset**: Get links to libraries, tests, documentation
4. **Choose implementation**: Select language-specific package

## Updating the Registry

The registry is automatically generated from part repositories using:

```powershell
cd specification/tools
.\generate-registry.ps1
```

This script:
1. Scans all part repositories
2. Reads `specs.json` from each part
3. Generates xRegistry-compliant JSON structure
4. Outputs to `spec-works.github.io/registry/`

## Manual Update Process

1. Make changes to part `specs.json` files
2. Run `generate-registry.ps1`
3. Commit and push to `spec-works.github.io`
4. GitHub Pages deploys automatically

## Automated Updates (Planned)

GitHub Action to regenerate registry on:
- New part releases
- specs.json updates
- Weekly schedule

## Registry Format

### Root Document (`index.json`)

```json
{
  "specversion": "0.5",
  "id": "specworks-factory",
  "name": "SpecWorks Factory Inventory",
  "partsurl": "https://spec-works.github.io/registry/parts",
  "parts": { ... }
}
```

### Part Document (`parts/{id}/index.json`)

```json
{
  "id": "vcard",
  "name": "vCard Component",
  "description": "...",
  "defaultversionid": "1.0.0",
  "versions": { ... }
}
```

### Part Linkset (`parts/{id}/versions/{version}/part.json`)

This is the `specs.json` from the component repository, containing:
- Specification links (rel: describedby)
- Library links (NuGet, PyPI, npm)
- Test links (CI results)
- Documentation links

## References

- [xRegistry Specification](https://github.com/xregistry/spec)
- [SpecWorks Factory Pattern](https://spec-works.github.io/specification/)
- [RFC 9264: Linkset Media Types](https://www.rfc-editor.org/rfc/rfc9264.html)

---

**Generated by**: `specification/tools/generate-registry.ps1`  
**Last Updated**: Run `git log -1 --format=%cd index.json` to see last generation time
